function buscarDisponibilidad(){
  let oficina = $('#cbOficina').val();
  _diasEspeciales = $.ajax({
      url: "/sitio/obtener/dias/especiales",
      dataTypa: "json",
      method: "POST",
      async: false,
  }).responseText;
  
  _disponibles = $.ajax({
      url: "/sitio/obtener/dias/disponibles",
      dataTypa: "json",
      method: "POST",
      data: {oficina: oficina},
      async: false,
  }).responseText;


  $("#fechaPicker").datepicker({
      selectOtherMonths: true,
      minDate: "+1d",
      maxDate: "+2m",
      dateFormat: "yy-mm-dd",
      firstDay: 1,
      monthNames: [
          "Enero",
          "Febrero",
          "Marzo",
          "Abril",
          "Mayo",
          "Junio",
          "Julio",
          "Agosto",
          "Septiembre",
          "Octubre",
          "Noviembre",
          "Diciembre",
      ],
      dayNamesMin: ["D", "L", "M", "M", "J", "V", "S"],
      altField: "#fechaTurno",
      altFormat: "yy-mm-dd",
      nextText: ">",
      prevText: "<",
      beforeShowDay: function (date) {
          var dia = jQuery.datepicker.formatDate("yy-mm-dd", date);
          var day = date.getDay();
          return  (_disponibles.indexOf(dia) > -1) && (_diasEspeciales.indexOf(dia) == -1) ? [day != 0, ""] :  [false];
      },
      onSelect: function (date) {
          $.ajax({
              url: "/sitio/obtener/horarios/dia",
              method: "POST",
              data: { fecha_turno: date,  tramite: tramite },
  
              success: function (response) {
                  $("#listHorarios").empty();
                  let flag = false;
                  for(let item in response){
                      flag = true;
                      let element ='<div class="form-group radio_questions" >';
                      element+='<label id="hora-'+response[item]+'">'+response[item]+'&nbsp;&nbsp;';
                      element+='<input name="hora_seleccionada" type="radio" value="'+response[item]+'" class="icheck required" onclick="'+'horario(this)'+'">';
                      element+="</label>";
                      element+=" </div>";
                      $('#listHorarios').append(element);
                  }
                  if(flag){
                      $(".errorHorario").hide();
                      $(".hasHorario").show('slow');
                      $("#listHorarios").show('slow');
                  }else{
                      $(".hasHorario").hide();
                      $(".errorHorario").show('slow');
                  }
              },
          });
      }
  });
}

